---
import Layout from '../layouts/Layout.astro';
import '../assets/styles/reset.css';
import '../assets/styles/global.css';
import About from '../components/About.astro';
import Quote from '../components/Quote.astro';
import { getCollection } from "astro:content";
import { quotelessJson } from 'astro:schema';
const quotes = await getCollection("quotes")

interface Props {
  quote: string;
  author: string;
}

const { quote, author } = Astro.props;
---

<Layout>

  <h2 class="saludo">Hi <span class="greeting"></span>, I'm Deanny!</h2>

  <h1 class="title">Frontend Developer</h1>

  <p class="frase">"I code efficient, accessible, and delightful web experiences."</p>
  <section class="slider" id="slider" >
    {
      quotes.map((quote)=>{
        return (
        <Quote 
        quote={quote.data.quote} 
        author={quote.data.author} 
        id={quote.id}
        />
        )
      })
    }
  </section>

</Layout>


<style>

  .title {
    font-size: 5rem;
    font-weight: 700;
    color: #fff;
    text-align: center;
  }
  .saludo {
    font-size: 2.5rem;
    font-weight: 600;
    color: #fff;
    text-align: center;
    margin-top: 100px;

  }
  .frase {
    font-size: 2.2rem;
    font-style: italic;
    color: #fff;
    text-align: center;
    margin: auto
    max-width: 600px;
  }

  .btn__contact {
    display: block;
    margin: 50px auto;
    padding: 15px 30px;
    font-size: 1.5rem;
    font-weight: 600;
    color: #fff;
    background-color: var(--background-color);
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius);
    cursor: pointer;
    transition: background-color 0.3s ease, transform 0.3s ease;
  }

  .btn__contact:hover {
    background-color: var(--background-color-hover);
    transform: scale(1.05);
  }

  .greeting {
    font-weight: 600;
    color: var(--secondary-color); 
    border-radius: 20px;
    padding: 0 10px;
    border: 1px solid var(--border-color); 
  /* Slider of quotes */
  
  .slider {
    width: 100%;
    max-width: 120em;
  }
  .slider {
    width: 80dvw;
    margin: auto;
    display: flex;
    flex-flow: row nowrap;
    align-items: center;
    padding: 1em;
    overflow-x: auto;
    scroll-snap-type: x mandatory;
    scrollbar-width: none;
    scroll-marker-group: after;
    scroll-behavior: smooth;
    anchor-name: --slider;
    margin-bottom: 3lh;
    scroll-snap-stop: always;
  }
  .slider::scroll-marker-group{
    display: flex;
    position: fixed;
    position-anchor: --slider;
    position-area: bottom center;
  }
</style>

<script is:inline>
  function obtenerSaludo() {
    const horaActual = new Date().getHours();
    if (horaActual < 12) {
      return "Good morning";
    } else if (horaActual < 18) {
      return "Good afternoon";
    } else {
      return "Good evening";
    }
  }

  document.querySelector('.greeting').textContent = obtenerSaludo();

  document.querySelector('.btn__contact').addEventListener('click', () => {
    alert('Thank you for your interest! I will get back to you soon.');
  });

  
  //Slider phrases
  function autoScroll(){
    const slider = document.querySelector("#slider");
    const quotes = slider.querySelectorAll('.quote');
    let initial=0;
    function autoScrollInterval(){
      return setInterval(function(){
        if(initial>(quotes.length-1)){
          initial=0
        }
        const quoteTo=quotes[initial]
        slider.scrollTo(quoteTo.offsetLeft,0);
        initial++;
      }, 3000);
    }
    let interval=autoScrollInterval()
    
    slider.addEventListener("mouseenter",()=>{
      clearInterval(interval);
    })
    slider.addEventListener("mouseleave",()=>{
      interval = autoScrollInterval();
    })
  }
  autoScroll();
</script>


