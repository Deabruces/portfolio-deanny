---
import Home from "../assets/icons/home.svg";
import Moon from "../assets/icons/moon.svg";
import Sun from "../assets/icons/sun.svg";
import LightDark from "../assets/icons/light-dark.svg";
import Person from "../assets/icons/person.svg";
import Projects from "../assets/icons/projects.svg";
import Blog from "../assets/icons/blog.svg";
import Tool from "../assets/icons/tool.svg";
import "../assets/styles/reset.css";
import "../assets/styles/global.css";
import Send from "../assets/icons/send.svg";
interface MenuElement {
  name: string;
  icon: unknown;
  path: string;
}
const menuElements: MenuElement[] = [
  { name: "Quién soy!", icon: Person, path: "/sobre-mi" },
  { name: "Proyectos", icon: Projects, path: "/proyectos" },
  { name: "Blog", icon: Blog, path: "/blog" },
  { name: "Herramientas", icon: Tool, path: "/tools" },
  { name: "Contacto", icon: Send, path: "/contacto" },
];
const isActualPage = (element: Partial<MenuElement>) => {
  return Astro.url.pathname === element.path;
};
---

<nav role="navigation" aria-label="Navegación principal">
  <ul>
    <li class:list={["li__home", { active: isActualPage({ path: "/" }) }]}>
      <a href="/" aria-label="Ir a la página de inicio"><Home /></a>
    </li>
    <li class="li__separador"><span class="separator"></span></li>
    {
      menuElements.map((element) => (
        <li class:list={["li__nav", { active: isActualPage(element) }]}>
          <a href={element.path}>
            <!-- @ts-ignore -->
            <element.icon />
            {element.name}
          </a>
        </li>
      ))
    }
    <li class="li__separador"><span class="separator"></span></li>
    <li class="toggle__theme">
      <div class="theme-switcher-menu" button-theme>
        <button
          type="button"
          class="button-theme action"
          aria-label="Cambiar tema de color"
          aria-expanded="false"
          aria-haspopup="true"
        >
          <span class="button-wrap">
            <span class="icon-theme-os-default">
              <LightDark />
              Tema
            </span>
          </span>
        </button>

        <ul class="submenu" aria-label="Opciones de tema">
          <div class="container-menu-theme">
            <li>
              <label class="theme__btn">
                <input
                  type="radio"
                  name="color-scheme"
                  id="theme-auto"
                  value="light dark"
                />
                <span class="icon-menu-theme">
                  <LightDark />
                  Por defecto
                </span>
              </label>
            </li>
            <li>
              <label class="theme__btn">
                <input
                  type="radio"
                  name="color-scheme"
                  id="theme-light"
                  value="light"
                />
                <span class="icon-menu-theme">
                  <Sun />
                  Claro
                </span>
              </label>
            </li>
            <li>
              <label class="theme__btn">
                <input
                  type="radio"
                  name="color-scheme"
                  id="theme-dark"
                  value="dark"
                />
                <span class="icon-menu-theme">
                  <Moon />
                  Oscuro
                </span>
              </label>
            </li>
          </div>
        </ul>
      </div>
    </li>
  </ul>
</nav>

<style>
  nav {
    display: flex;

    height: min-content;
    border: 1px solid var(--deanny-purpura);
    border-radius: 60px;

    font-size: 20px;

    background-color: light-dark(#faf8ffa9, #26122ba5);
    backdrop-filter: blur(10px);
  }

  ul {
    display: flex;
    flex-direction: row;
    gap: 0.1rem;
    align-items: center;
    justify-content: space-evenly;

    padding-inline-start: 0;
  }

  .separator {
    display: block;

    width: 1px;
    height: 1lh;
    border-radius: 5px;

    background: var(--deanny-purpura);
  }

  li {
    display: flex;
    flex-direction: row;
    gap: 5px;
    align-items: center;

    padding: 3px 6px;

    list-style-type: none;
  }

  li.active {
    font-weight: 800;
    color: var(--deanny-cian);
  }

  a {
    display: flex;
    gap: .5rem;
    align-items: center;
    font-size: 1rem;
  }

  .li__nav {
    --_border-color: var(--li-border-color, transparent);

    padding: 0 8px;
    border: 1px solid var(--_border-color);
    border-radius: 20px;
    transition: all 300ms ease-in-out;
  }

  .li__nav:hover {
    --li-border-color: var(--deanny-cian);

    border-radius: 20px;
  }

  .li__nav.active,
  li.active {
    --li-border-color: var(--deanny-cian);

    border-radius: 20px;
  }

  li.active a,
  .li__nav.active a {
    color: var(--deanny-cian);
  }

  .li__home {
    padding: 3px 17px;
    font-weight: 500;
    transition: all 300ms ease-in-out;
  }

  .li__separador {
    display: flex;
    align-items: center;
    padding: 0;
  }

  .theme__btn {
    display: block;

    padding: 8px;
    border: none;
    border-radius: 10px;

    color: var(--acento-btn);

    appearance: none;
    background-color: var(--section-dark);

    transition: all 300ms ease-in-out;
  }

  label {
    cursor: pointer;
    font-size: 1rem;
      font-weight: normal;
    transition:
      color 0.3s ease,
      background-color 0.3s ease,
      transform 0.2s ease,
      box-shadow 0.2s ease;
  }

  label:has(input:checked) {
    transform: scale(1.02);
    color: var(--acento-btn-hover);
    background-color: var(--section-dark);
    box-shadow: 0 2px 8px rgb(142 68 173 / 20%);
  }

  input {
    display: none;
  }

  .theme__btn:hover {
    color: var(--acento-btn-hover);
    background-color: var(--section-dark);
  }

  .icon-theme-os-default {
    display: flex;
    flex-direction: row;
    gap: 5px;
    align-items: center;

    font-size: 1rem;
    color: var(--deanny-purpura);
  }

  .submenu {
    position: absolute;
    top: 100%;
    right: -138px;
    transform: translateY(-10px) scale(0.95);

    display: none;

    width: 230px;
    padding: 10px;
    border: 1px solid var(--deanny-purpura);
    border-radius: 20px;

    opacity: 0;
    background-color: var(--background-color);

    transition:
      opacity 0.2s ease,
      transform 0.2s ease,
      visibility 0.2s ease;
  }

  .submenu.show {
    transform: translateY(0) scale(1);
    opacity: 1;
  }

  .button-theme {
    cursor: pointer;

    display: inline-block;

    margin: 2px 5px;
    padding: 3px 0;
    border: none;

    color: var(--text-color);
    text-decoration: none;

    background-color: transparent;
  }

  .container-menu-theme {
    display: flex;
    flex-direction: column;
    gap: 5px;
    width: 100%;
  }

  span.icon-menu-theme {
    display: flex;
    flex-direction: row;
    gap: 5px;
    align-items: center;
    justify-content: flex-start;

    width: 10rem;

    color: var(--deanny-purpura);
  }

  span.icon-menu-theme:hover {
    color: var(--deanny-cian);
    background-color: var(--section-dark);
  }

  span.icon-menu-theme:active {
    color: var(--deanny-cian);
  }
</style>

<script src="../scripts/navigation.js"></script>
